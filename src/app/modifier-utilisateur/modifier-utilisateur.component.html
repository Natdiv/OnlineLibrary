<div class="app flex-row ">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-md-8">
        <div class="card mx-4">
          <div class="card-body p-4">
            <h4>Modifier utilisateur</h4>
            <hr>
            <br>
            <form [formGroup]="utilisateurForm" (ngSubmit)="onUtilisateurUpdate()">
              <div class="form-group row">
                <label class="col-md-3">Nom de l'utilisateur</label>
                <div class="col-md-9">
                  <input (focus)="message=''" formControlName="username" placeholder="Nom de l'utilisateur" type="text" required/>
                </div>
              </div>
              <div class="form-group row">
                <label class="col-md-3">Mot de passe</label>
                <div class="col-md-9">
                  <input (focus)="message=''" formControlName="password" placeholder="Mot de passe" type="password" />
                  <br>
                  <span class="help-block text-info">Au moins 8 caractère, remplir ce champ implique la modification du mot de passe</span>
                </div>
              </div>
              <div class="form-group row">
                <label class="col-md-3">Durée de validité en jours</label>
                <div class="col-md-9">
                  <input (focus)="message=''" formControlName="delai_en_jour" placeholder="Nombre de jours" type="text" readonly/>
                  <br />
                  <span class="help-block text-info" *ngIf="utilisateur.delai_en_jour && parseItn(utilisateur.delai_en_jour) > 0">Nombre de jour restant</span>
                </div>
              </div>
              <div class="form-group row">
                <label class="col-md-3">Catégorie</label>
                <div class="col-md-9">
                  <select formControlName="categorie" id="categorie">
                    <option [value]="utilisateur.categorie" [selected]="true">{{(utilisateur.categorie==='admin' ? 'Administrateur': 'Lecteur')}}</option>
                    <option [value]="utilisateur.categorie==='admin' ? 'lecteur' : 'admin'">{{(utilisateur.categorie==='admin' ? 'Lecteur' : 'Administrateur')}}</option>
                  </select>
                </div>
              </div>
              <hr>
              <div class="form-group row">
                <label class="col-md-3">Nouvel abonnement</label>
                <div class="col-md-9">
                  <label class="switch switch-3d switch-primary">
                    <input class="switch-input" type="checkbox" #etat (click)="nouvelAbonnement()">
                    <span class="switch-slider"></span>
                  </label>
                </div>
              </div>
              <div class="form-group row" *ngIf="nouvelAbonnementState">
                <label class="col-md-3">Durée de validité en jours</label>
                <div class="col-md-9">
                  <input (focus)="message=''" formControlName="new_delai_en_jour" placeholder="Nombre de jours" type="number" min="1" required/>
                  <br />
                  <span class="help-block text-info">Nombre de jour pour lequel le compte sera actif</span>
                </div>
              </div>
              <div class="row">
                <p class="col-12 text-danger text-center">{{message}}</p>
              </div>
              <div style="margin: 7px;">
                <button class="btn btn-block btn-success" [disabled]="utilisateurForm.invalid" type="submit">Modifier</button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
